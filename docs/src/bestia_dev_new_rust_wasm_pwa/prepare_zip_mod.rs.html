<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `src/prepare_zip_mod.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>prepare_zip_mod.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script><script defer src="../../source-script.js"></script><script defer src="../../source-files.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../bestia_dev_new_rust_wasm_pwa/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../bestia_dev_new_rust_wasm_pwa/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../bestia_dev_new_rust_wasm_pwa/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
<span id="4">4</span>
<span id="5">5</span>
<span id="6">6</span>
<span id="7">7</span>
<span id="8">8</span>
<span id="9">9</span>
<span id="10">10</span>
<span id="11">11</span>
<span id="12">12</span>
<span id="13">13</span>
<span id="14">14</span>
<span id="15">15</span>
<span id="16">16</span>
<span id="17">17</span>
<span id="18">18</span>
<span id="19">19</span>
<span id="20">20</span>
<span id="21">21</span>
<span id="22">22</span>
<span id="23">23</span>
<span id="24">24</span>
<span id="25">25</span>
<span id="26">26</span>
<span id="27">27</span>
<span id="28">28</span>
<span id="29">29</span>
<span id="30">30</span>
<span id="31">31</span>
<span id="32">32</span>
<span id="33">33</span>
<span id="34">34</span>
<span id="35">35</span>
<span id="36">36</span>
<span id="37">37</span>
<span id="38">38</span>
<span id="39">39</span>
<span id="40">40</span>
<span id="41">41</span>
<span id="42">42</span>
<span id="43">43</span>
<span id="44">44</span>
<span id="45">45</span>
<span id="46">46</span>
<span id="47">47</span>
<span id="48">48</span>
<span id="49">49</span>
<span id="50">50</span>
<span id="51">51</span>
<span id="52">52</span>
<span id="53">53</span>
<span id="54">54</span>
<span id="55">55</span>
<span id="56">56</span>
<span id="57">57</span>
<span id="58">58</span>
<span id="59">59</span>
<span id="60">60</span>
<span id="61">61</span>
<span id="62">62</span>
<span id="63">63</span>
<span id="64">64</span>
<span id="65">65</span>
<span id="66">66</span>
<span id="67">67</span>
<span id="68">68</span>
<span id="69">69</span>
<span id="70">70</span>
<span id="71">71</span>
<span id="72">72</span>
<span id="73">73</span>
<span id="74">74</span>
<span id="75">75</span>
<span id="76">76</span>
<span id="77">77</span>
<span id="78">78</span>
<span id="79">79</span>
<span id="80">80</span>
<span id="81">81</span>
<span id="82">82</span>
<span id="83">83</span>
<span id="84">84</span>
<span id="85">85</span>
<span id="86">86</span>
<span id="87">87</span>
<span id="88">88</span>
<span id="89">89</span>
<span id="90">90</span>
<span id="91">91</span>
<span id="92">92</span>
<span id="93">93</span>
<span id="94">94</span>
<span id="95">95</span>
<span id="96">96</span>
<span id="97">97</span>
<span id="98">98</span>
<span id="99">99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
<span id="189">189</span>
<span id="190">190</span>
<span id="191">191</span>
<span id="192">192</span>
<span id="193">193</span>
<span id="194">194</span>
<span id="195">195</span>
<span id="196">196</span>
<span id="197">197</span>
<span id="198">198</span>
<span id="199">199</span>
<span id="200">200</span>
<span id="201">201</span>
<span id="202">202</span>
<span id="203">203</span>
<span id="204">204</span>
<span id="205">205</span>
<span id="206">206</span>
<span id="207">207</span>
<span id="208">208</span>
<span id="209">209</span>
<span id="210">210</span>
<span id="211">211</span>
<span id="212">212</span>
<span id="213">213</span>
<span id="214">214</span>
<span id="215">215</span>
<span id="216">216</span>
<span id="217">217</span>
<span id="218">218</span>
<span id="219">219</span>
<span id="220">220</span>
<span id="221">221</span>
<span id="222">222</span>
<span id="223">223</span>
<span id="224">224</span>
<span id="225">225</span>
<span id="226">226</span>
<span id="227">227</span>
<span id="228">228</span>
<span id="229">229</span>
<span id="230">230</span>
<span id="231">231</span>
<span id="232">232</span>
<span id="233">233</span>
<span id="234">234</span>
<span id="235">235</span>
<span id="236">236</span>
<span id="237">237</span>
<span id="238">238</span>
<span id="239">239</span>
<span id="240">240</span>
<span id="241">241</span>
<span id="242">242</span>
<span id="243">243</span>
<span id="244">244</span>
<span id="245">245</span>
<span id="246">246</span>
<span id="247">247</span>
<span id="248">248</span>
<span id="249">249</span>
<span id="250">250</span>
<span id="251">251</span>
<span id="252">252</span>
<span id="253">253</span>
<span id="254">254</span>
<span id="255">255</span>
<span id="256">256</span>
<span id="257">257</span>
<span id="258">258</span>
<span id="259">259</span>
<span id="260">260</span>
<span id="261">261</span>
<span id="262">262</span>
<span id="263">263</span>
<span id="264">264</span>
<span id="265">265</span>
<span id="266">266</span>
<span id="267">267</span>
<span id="268">268</span>
<span id="269">269</span>
<span id="270">270</span>
<span id="271">271</span>
<span id="272">272</span>
<span id="273">273</span>
<span id="274">274</span>
<span id="275">275</span>
<span id="276">276</span>
<span id="277">277</span>
<span id="278">278</span>
<span id="279">279</span>
<span id="280">280</span>
<span id="281">281</span>
<span id="282">282</span>
<span id="283">283</span>
<span id="284">284</span>
<span id="285">285</span>
<span id="286">286</span>
<span id="287">287</span>
<span id="288">288</span>
<span id="289">289</span>
<span id="290">290</span>
<span id="291">291</span>
<span id="292">292</span>
<span id="293">293</span>
<span id="294">294</span>
<span id="295">295</span>
<span id="296">296</span>
<span id="297">297</span>
<span id="298">298</span>
<span id="299">299</span>
<span id="300">300</span>
<span id="301">301</span>
<span id="302">302</span>
<span id="303">303</span>
<span id="304">304</span>
<span id="305">305</span>
<span id="306">306</span>
<span id="307">307</span>
<span id="308">308</span>
<span id="309">309</span>
<span id="310">310</span>
<span id="311">311</span>
<span id="312">312</span>
<span id="313">313</span>
<span id="314">314</span>
<span id="315">315</span>
<span id="316">316</span>
<span id="317">317</span>
<span id="318">318</span>
<span id="319">319</span>
<span id="320">320</span>
<span id="321">321</span>
<span id="322">322</span>
<span id="323">323</span>
<span id="324">324</span>
<span id="325">325</span>
<span id="326">326</span>
<span id="327">327</span>
<span id="328">328</span>
<span id="329">329</span>
<span id="330">330</span>
<span id="331">331</span>
<span id="332">332</span>
<span id="333">333</span>
<span id="334">334</span>
<span id="335">335</span>
<span id="336">336</span>
<span id="337">337</span>
<span id="338">338</span>
<span id="339">339</span>
<span id="340">340</span>
<span id="341">341</span>
<span id="342">342</span>
<span id="343">343</span>
<span id="344">344</span>
<span id="345">345</span>
<span id="346">346</span>
<span id="347">347</span>
<span id="348">348</span>
<span id="349">349</span>
<span id="350">350</span>
<span id="351">351</span>
<span id="352">352</span>
<span id="353">353</span>
<span id="354">354</span>
<span id="355">355</span>
<span id="356">356</span>
<span id="357">357</span>
<span id="358">358</span>
<span id="359">359</span>
<span id="360">360</span>
<span id="361">361</span>
<span id="362">362</span>
<span id="363">363</span>
<span id="364">364</span>
<span id="365">365</span>
<span id="366">366</span>
<span id="367">367</span>
<span id="368">368</span>
<span id="369">369</span>
<span id="370">370</span>
<span id="371">371</span>
<span id="372">372</span>
<span id="373">373</span>
<span id="374">374</span>
<span id="375">375</span>
<span id="376">376</span>
<span id="377">377</span>
<span id="378">378</span>
<span id="379">379</span>
<span id="380">380</span>
<span id="381">381</span>
<span id="382">382</span>
<span id="383">383</span>
<span id="384">384</span>
<span id="385">385</span>
<span id="386">386</span>
<span id="387">387</span>
<span id="388">388</span>
<span id="389">389</span>
<span id="390">390</span>
<span id="391">391</span>
<span id="392">392</span>
<span id="393">393</span>
<span id="394">394</span>
<span id="395">395</span>
<span id="396">396</span>
<span id="397">397</span>
<span id="398">398</span>
<span id="399">399</span>
<span id="400">400</span>
<span id="401">401</span>
<span id="402">402</span>
<span id="403">403</span>
<span id="404">404</span>
<span id="405">405</span>
<span id="406">406</span>
<span id="407">407</span>
<span id="408">408</span>
<span id="409">409</span>
<span id="410">410</span>
<span id="411">411</span>
<span id="412">412</span>
<span id="413">413</span>
<span id="414">414</span>
<span id="415">415</span>
<span id="416">416</span>
<span id="417">417</span>
<span id="418">418</span>
<span id="419">419</span>
<span id="420">420</span>
<span id="421">421</span>
<span id="422">422</span>
<span id="423">423</span>
<span id="424">424</span>
<span id="425">425</span>
<span id="426">426</span>
<span id="427">427</span>
<span id="428">428</span>
<span id="429">429</span>
<span id="430">430</span>
<span id="431">431</span>
<span id="432">432</span>
<span id="433">433</span>
<span id="434">434</span>
<span id="435">435</span>
<span id="436">436</span>
<span id="437">437</span>
<span id="438">438</span>
<span id="439">439</span>
<span id="440">440</span>
<span id="441">441</span>
<span id="442">442</span>
<span id="443">443</span>
<span id="444">444</span>
<span id="445">445</span>
<span id="446">446</span>
<span id="447">447</span>
<span id="448">448</span>
<span id="449">449</span>
<span id="450">450</span>
<span id="451">451</span>
<span id="452">452</span>
<span id="453">453</span>
<span id="454">454</span>
<span id="455">455</span>
<span id="456">456</span>
<span id="457">457</span>
<span id="458">458</span>
<span id="459">459</span>
<span id="460">460</span>
<span id="461">461</span>
<span id="462">462</span>
<span id="463">463</span>
<span id="464">464</span>
<span id="465">465</span>
<span id="466">466</span>
<span id="467">467</span>
<span id="468">468</span>
<span id="469">469</span>
<span id="470">470</span>
<span id="471">471</span>
<span id="472">472</span>
<span id="473">473</span>
<span id="474">474</span>
<span id="475">475</span>
<span id="476">476</span>
<span id="477">477</span>
<span id="478">478</span>
<span id="479">479</span>
<span id="480">480</span>
<span id="481">481</span>
<span id="482">482</span>
<span id="483">483</span>
<span id="484">484</span>
<span id="485">485</span>
<span id="486">486</span>
<span id="487">487</span>
<span id="488">488</span>
<span id="489">489</span>
<span id="490">490</span>
<span id="491">491</span>
<span id="492">492</span>
<span id="493">493</span>
<span id="494">494</span>
<span id="495">495</span>
<span id="496">496</span>
<span id="497">497</span>
<span id="498">498</span>
<span id="499">499</span>
<span id="500">500</span>
<span id="501">501</span>
<span id="502">502</span>
<span id="503">503</span>
<span id="504">504</span>
<span id="505">505</span>
<span id="506">506</span>
<span id="507">507</span>
<span id="508">508</span>
<span id="509">509</span>
<span id="510">510</span>
<span id="511">511</span>
<span id="512">512</span>
<span id="513">513</span>
<span id="514">514</span>
<span id="515">515</span>
<span id="516">516</span>
<span id="517">517</span>
<span id="518">518</span>
<span id="519">519</span>
<span id="520">520</span>
<span id="521">521</span>
<span id="522">522</span>
<span id="523">523</span>
<span id="524">524</span>
<span id="525">525</span>
<span id="526">526</span>
<span id="527">527</span>
<span id="528">528</span>
<span id="529">529</span>
<span id="530">530</span>
<span id="531">531</span>
<span id="532">532</span>
<span id="533">533</span>
<span id="534">534</span>
<span id="535">535</span>
<span id="536">536</span>
<span id="537">537</span>
<span id="538">538</span>
<span id="539">539</span>
<span id="540">540</span>
<span id="541">541</span>
<span id="542">542</span>
<span id="543">543</span>
<span id="544">544</span>
<span id="545">545</span>
<span id="546">546</span>
<span id="547">547</span>
<span id="548">548</span>
<span id="549">549</span>
<span id="550">550</span>
<span id="551">551</span>
<span id="552">552</span>
<span id="553">553</span>
<span id="554">554</span>
<span id="555">555</span>
<span id="556">556</span>
<span id="557">557</span>
<span id="558">558</span>
<span id="559">559</span>
<span id="560">560</span>
<span id="561">561</span>
<span id="562">562</span>
<span id="563">563</span>
<span id="564">564</span>
<span id="565">565</span>
<span id="566">566</span>
<span id="567">567</span>
<span id="568">568</span>
<span id="569">569</span>
<span id="570">570</span>
<span id="571">571</span>
<span id="572">572</span>
<span id="573">573</span>
<span id="574">574</span>
<span id="575">575</span>
<span id="576">576</span>
<span id="577">577</span>
<span id="578">578</span>
<span id="579">579</span>
<span id="580">580</span>
<span id="581">581</span>
<span id="582">582</span>
<span id="583">583</span>
<span id="584">584</span>
<span id="585">585</span>
<span id="586">586</span>
<span id="587">587</span>
<span id="588">588</span>
<span id="589">589</span>
<span id="590">590</span>
<span id="591">591</span>
<span id="592">592</span>
<span id="593">593</span>
<span id="594">594</span>
<span id="595">595</span>
<span id="596">596</span>
<span id="597">597</span>
<span id="598">598</span>
<span id="599">599</span>
<span id="600">600</span>
<span id="601">601</span>
<span id="602">602</span>
<span id="603">603</span>
<span id="604">604</span>
<span id="605">605</span>
<span id="606">606</span>
<span id="607">607</span>
<span id="608">608</span>
<span id="609">609</span>
<span id="610">610</span>
<span id="611">611</span>
<span id="612">612</span>
<span id="613">613</span>
<span id="614">614</span>
<span id="615">615</span>
<span id="616">616</span>
<span id="617">617</span>
<span id="618">618</span>
<span id="619">619</span>
<span id="620">620</span>
<span id="621">621</span>
<span id="622">622</span>
<span id="623">623</span>
<span id="624">624</span>
<span id="625">625</span>
<span id="626">626</span>
<span id="627">627</span>
<span id="628">628</span>
<span id="629">629</span>
<span id="630">630</span>
<span id="631">631</span>
<span id="632">632</span>
<span id="633">633</span>
<span id="634">634</span>
<span id="635">635</span>
<span id="636">636</span>
<span id="637">637</span>
<span id="638">638</span>
<span id="639">639</span>
<span id="640">640</span>
<span id="641">641</span>
<span id="642">642</span>
<span id="643">643</span>
<span id="644">644</span>
<span id="645">645</span>
<span id="646">646</span>
<span id="647">647</span>
<span id="648">648</span>
<span id="649">649</span>
<span id="650">650</span>
<span id="651">651</span>
<span id="652">652</span>
<span id="653">653</span>
<span id="654">654</span>
<span id="655">655</span>
<span id="656">656</span>
<span id="657">657</span>
<span id="658">658</span>
<span id="659">659</span>
<span id="660">660</span>
<span id="661">661</span>
<span id="662">662</span>
<span id="663">663</span>
<span id="664">664</span>
<span id="665">665</span>
<span id="666">666</span>
<span id="667">667</span>
<span id="668">668</span>
<span id="669">669</span>
<span id="670">670</span>
<span id="671">671</span>
<span id="672">672</span>
<span id="673">673</span>
<span id="674">674</span>
<span id="675">675</span>
<span id="676">676</span>
<span id="677">677</span>
<span id="678">678</span>
<span id="679">679</span>
<span id="680">680</span>
<span id="681">681</span>
<span id="682">682</span>
<span id="683">683</span>
<span id="684">684</span>
<span id="685">685</span>
<span id="686">686</span>
<span id="687">687</span>
<span id="688">688</span>
<span id="689">689</span>
<span id="690">690</span>
<span id="691">691</span>
<span id="692">692</span>
<span id="693">693</span>
<span id="694">694</span>
<span id="695">695</span>
<span id="696">696</span>
<span id="697">697</span>
<span id="698">698</span>
<span id="699">699</span>
<span id="700">700</span>
<span id="701">701</span>
<span id="702">702</span>
<span id="703">703</span>
<span id="704">704</span>
<span id="705">705</span>
<span id="706">706</span>
<span id="707">707</span>
<span id="708">708</span>
<span id="709">709</span>
<span id="710">710</span>
<span id="711">711</span>
<span id="712">712</span>
<span id="713">713</span>
<span id="714">714</span>
<span id="715">715</span>
<span id="716">716</span>
<span id="717">717</span>
<span id="718">718</span>
<span id="719">719</span>
<span id="720">720</span>
<span id="721">721</span>
<span id="722">722</span>
<span id="723">723</span>
<span id="724">724</span>
<span id="725">725</span>
<span id="726">726</span>
<span id="727">727</span>
<span id="728">728</span>
<span id="729">729</span>
<span id="730">730</span>
<span id="731">731</span>
<span id="732">732</span>
<span id="733">733</span>
<span id="734">734</span>
<span id="735">735</span>
<span id="736">736</span>
<span id="737">737</span>
<span id="738">738</span>
<span id="739">739</span>
<span id="740">740</span>
<span id="741">741</span>
<span id="742">742</span>
<span id="743">743</span>
<span id="744">744</span>
<span id="745">745</span>
<span id="746">746</span>
<span id="747">747</span>
<span id="748">748</span>
<span id="749">749</span>
<span id="750">750</span>
<span id="751">751</span>
<span id="752">752</span>
<span id="753">753</span>
<span id="754">754</span>
<span id="755">755</span>
<span id="756">756</span>
<span id="757">757</span>
<span id="758">758</span>
<span id="759">759</span>
<span id="760">760</span>
<span id="761">761</span>
<span id="762">762</span>
<span id="763">763</span>
<span id="764">764</span>
<span id="765">765</span>
<span id="766">766</span>
<span id="767">767</span>
<span id="768">768</span>
<span id="769">769</span>
<span id="770">770</span>
<span id="771">771</span>
<span id="772">772</span>
<span id="773">773</span>
<span id="774">774</span>
<span id="775">775</span>
<span id="776">776</span>
<span id="777">777</span>
<span id="778">778</span>
<span id="779">779</span>
<span id="780">780</span>
<span id="781">781</span>
<span id="782">782</span>
<span id="783">783</span>
<span id="784">784</span>
<span id="785">785</span>
<span id="786">786</span>
<span id="787">787</span>
<span id="788">788</span>
<span id="789">789</span>
<span id="790">790</span>
<span id="791">791</span>
<span id="792">792</span>
<span id="793">793</span>
<span id="794">794</span>
<span id="795">795</span>
<span id="796">796</span>
<span id="797">797</span>
<span id="798">798</span>
<span id="799">799</span>
<span id="800">800</span>
<span id="801">801</span>
<span id="802">802</span>
<span id="803">803</span>
<span id="804">804</span>
<span id="805">805</span>
<span id="806">806</span>
<span id="807">807</span>
<span id="808">808</span>
<span id="809">809</span>
<span id="810">810</span>
<span id="811">811</span>
<span id="812">812</span>
<span id="813">813</span>
<span id="814">814</span>
<span id="815">815</span>
<span id="816">816</span>
<span id="817">817</span>
<span id="818">818</span>
<span id="819">819</span>
<span id="820">820</span>
<span id="821">821</span>
<span id="822">822</span>
<span id="823">823</span>
<span id="824">824</span>
<span id="825">825</span>
<span id="826">826</span>
<span id="827">827</span>
<span id="828">828</span>
<span id="829">829</span>
<span id="830">830</span>
<span id="831">831</span>
<span id="832">832</span>
<span id="833">833</span>
<span id="834">834</span>
<span id="835">835</span>
<span id="836">836</span>
<span id="837">837</span>
<span id="838">838</span>
<span id="839">839</span>
<span id="840">840</span>
<span id="841">841</span>
<span id="842">842</span>
<span id="843">843</span>
<span id="844">844</span>
<span id="845">845</span>
<span id="846">846</span>
<span id="847">847</span>
<span id="848">848</span>
<span id="849">849</span>
<span id="850">850</span>
<span id="851">851</span>
<span id="852">852</span>
<span id="853">853</span>
<span id="854">854</span>
<span id="855">855</span>
<span id="856">856</span>
<span id="857">857</span>
<span id="858">858</span>
<span id="859">859</span>
<span id="860">860</span>
<span id="861">861</span>
<span id="862">862</span>
<span id="863">863</span>
<span id="864">864</span>
<span id="865">865</span>
<span id="866">866</span>
<span id="867">867</span>
<span id="868">868</span>
<span id="869">869</span>
<span id="870">870</span>
<span id="871">871</span>
<span id="872">872</span>
<span id="873">873</span>
<span id="874">874</span>
<span id="875">875</span>
<span id="876">876</span>
<span id="877">877</span>
<span id="878">878</span>
<span id="879">879</span>
<span id="880">880</span>
<span id="881">881</span>
<span id="882">882</span>
<span id="883">883</span>
<span id="884">884</span>
<span id="885">885</span>
<span id="886">886</span>
<span id="887">887</span>
<span id="888">888</span>
<span id="889">889</span>
<span id="890">890</span>
<span id="891">891</span>
<span id="892">892</span>
<span id="893">893</span>
<span id="894">894</span>
<span id="895">895</span>
<span id="896">896</span>
<span id="897">897</span>
<span id="898">898</span>
<span id="899">899</span>
<span id="900">900</span>
<span id="901">901</span>
<span id="902">902</span>
<span id="903">903</span>
<span id="904">904</span>
<span id="905">905</span>
<span id="906">906</span>
<span id="907">907</span>
<span id="908">908</span>
<span id="909">909</span>
<span id="910">910</span>
<span id="911">911</span>
<span id="912">912</span>
<span id="913">913</span>
<span id="914">914</span>
<span id="915">915</span>
<span id="916">916</span>
<span id="917">917</span>
<span id="918">918</span>
<span id="919">919</span>
<span id="920">920</span>
<span id="921">921</span>
<span id="922">922</span>
<span id="923">923</span>
<span id="924">924</span>
<span id="925">925</span>
<span id="926">926</span>
<span id="927">927</span>
<span id="928">928</span>
<span id="929">929</span>
<span id="930">930</span>
<span id="931">931</span>
<span id="932">932</span>
<span id="933">933</span>
<span id="934">934</span>
<span id="935">935</span>
<span id="936">936</span>
<span id="937">937</span>
<span id="938">938</span>
<span id="939">939</span>
<span id="940">940</span>
<span id="941">941</span>
<span id="942">942</span>
<span id="943">943</span>
<span id="944">944</span>
<span id="945">945</span>
<span id="946">946</span>
<span id="947">947</span>
<span id="948">948</span>
<span id="949">949</span>
<span id="950">950</span>
<span id="951">951</span>
<span id="952">952</span>
<span id="953">953</span>
<span id="954">954</span>
<span id="955">955</span>
<span id="956">956</span>
<span id="957">957</span>
<span id="958">958</span>
<span id="959">959</span>
<span id="960">960</span>
<span id="961">961</span>
<span id="962">962</span>
<span id="963">963</span>
<span id="964">964</span>
<span id="965">965</span>
<span id="966">966</span>
<span id="967">967</span>
<span id="968">968</span>
<span id="969">969</span>
<span id="970">970</span>
<span id="971">971</span>
<span id="972">972</span>
<span id="973">973</span>
<span id="974">974</span>
<span id="975">975</span>
<span id="976">976</span>
<span id="977">977</span>
<span id="978">978</span>
<span id="979">979</span>
<span id="980">980</span>
<span id="981">981</span>
<span id="982">982</span>
<span id="983">983</span>
<span id="984">984</span>
<span id="985">985</span>
<span id="986">986</span>
<span id="987">987</span>
<span id="988">988</span>
<span id="989">989</span>
<span id="990">990</span>
<span id="991">991</span>
<span id="992">992</span>
<span id="993">993</span>
<span id="994">994</span>
<span id="995">995</span>
<span id="996">996</span>
<span id="997">997</span>
<span id="998">998</span>
<span id="999">999</span>
<span id="1000">1000</span>
<span id="1001">1001</span>
<span id="1002">1002</span>
<span id="1003">1003</span>
<span id="1004">1004</span>
<span id="1005">1005</span>
<span id="1006">1006</span>
<span id="1007">1007</span>
<span id="1008">1008</span>
<span id="1009">1009</span>
<span id="1010">1010</span>
<span id="1011">1011</span>
<span id="1012">1012</span>
<span id="1013">1013</span>
<span id="1014">1014</span>
<span id="1015">1015</span>
<span id="1016">1016</span>
<span id="1017">1017</span>
<span id="1018">1018</span>
<span id="1019">1019</span>
<span id="1020">1020</span>
<span id="1021">1021</span>
<span id="1022">1022</span>
<span id="1023">1023</span>
<span id="1024">1024</span>
<span id="1025">1025</span>
<span id="1026">1026</span>
<span id="1027">1027</span>
<span id="1028">1028</span>
<span id="1029">1029</span>
<span id="1030">1030</span>
<span id="1031">1031</span>
<span id="1032">1032</span>
<span id="1033">1033</span>
<span id="1034">1034</span>
<span id="1035">1035</span>
<span id="1036">1036</span>
<span id="1037">1037</span>
<span id="1038">1038</span>
<span id="1039">1039</span>
<span id="1040">1040</span>
<span id="1041">1041</span>
<span id="1042">1042</span>
<span id="1043">1043</span>
<span id="1044">1044</span>
<span id="1045">1045</span>
<span id="1046">1046</span>
<span id="1047">1047</span>
<span id="1048">1048</span>
<span id="1049">1049</span>
<span id="1050">1050</span>
<span id="1051">1051</span>
<span id="1052">1052</span>
<span id="1053">1053</span>
<span id="1054">1054</span>
<span id="1055">1055</span>
<span id="1056">1056</span>
<span id="1057">1057</span>
<span id="1058">1058</span>
<span id="1059">1059</span>
<span id="1060">1060</span>
<span id="1061">1061</span>
<span id="1062">1062</span>
<span id="1063">1063</span>
<span id="1064">1064</span>
<span id="1065">1065</span>
<span id="1066">1066</span>
<span id="1067">1067</span>
<span id="1068">1068</span>
<span id="1069">1069</span>
<span id="1070">1070</span>
<span id="1071">1071</span>
<span id="1072">1072</span>
<span id="1073">1073</span>
<span id="1074">1074</span>
<span id="1075">1075</span>
<span id="1076">1076</span>
<span id="1077">1077</span>
<span id="1078">1078</span>
<span id="1079">1079</span>
<span id="1080">1080</span>
<span id="1081">1081</span>
<span id="1082">1082</span>
<span id="1083">1083</span>
<span id="1084">1084</span>
<span id="1085">1085</span>
<span id="1086">1086</span>
<span id="1087">1087</span>
<span id="1088">1088</span>
<span id="1089">1089</span>
<span id="1090">1090</span>
<span id="1091">1091</span>
<span id="1092">1092</span>
<span id="1093">1093</span>
<span id="1094">1094</span>
<span id="1095">1095</span>
<span id="1096">1096</span>
<span id="1097">1097</span>
<span id="1098">1098</span>
<span id="1099">1099</span>
<span id="1100">1100</span>
<span id="1101">1101</span>
<span id="1102">1102</span>
<span id="1103">1103</span>
<span id="1104">1104</span>
<span id="1105">1105</span>
<span id="1106">1106</span>
<span id="1107">1107</span>
<span id="1108">1108</span>
<span id="1109">1109</span>
<span id="1110">1110</span>
<span id="1111">1111</span>
<span id="1112">1112</span>
<span id="1113">1113</span>
<span id="1114">1114</span>
<span id="1115">1115</span>
<span id="1116">1116</span>
<span id="1117">1117</span>
<span id="1118">1118</span>
<span id="1119">1119</span>
<span id="1120">1120</span>
<span id="1121">1121</span>
<span id="1122">1122</span>
<span id="1123">1123</span>
<span id="1124">1124</span>
<span id="1125">1125</span>
<span id="1126">1126</span>
<span id="1127">1127</span>
<span id="1128">1128</span>
<span id="1129">1129</span>
<span id="1130">1130</span>
<span id="1131">1131</span>
<span id="1132">1132</span>
<span id="1133">1133</span>
<span id="1134">1134</span>
<span id="1135">1135</span>
<span id="1136">1136</span>
<span id="1137">1137</span>
<span id="1138">1138</span>
<span id="1139">1139</span>
<span id="1140">1140</span>
<span id="1141">1141</span>
<span id="1142">1142</span>
<span id="1143">1143</span>
<span id="1144">1144</span>
<span id="1145">1145</span>
<span id="1146">1146</span>
<span id="1147">1147</span>
<span id="1148">1148</span>
<span id="1149">1149</span>
<span id="1150">1150</span>
<span id="1151">1151</span>
<span id="1152">1152</span>
<span id="1153">1153</span>
<span id="1154">1154</span>
<span id="1155">1155</span>
<span id="1156">1156</span>
<span id="1157">1157</span>
<span id="1158">1158</span>
<span id="1159">1159</span>
<span id="1160">1160</span>
<span id="1161">1161</span>
<span id="1162">1162</span>
<span id="1163">1163</span>
<span id="1164">1164</span>
<span id="1165">1165</span>
<span id="1166">1166</span>
<span id="1167">1167</span>
<span id="1168">1168</span>
<span id="1169">1169</span>
<span id="1170">1170</span>
<span id="1171">1171</span>
<span id="1172">1172</span>
<span id="1173">1173</span>
<span id="1174">1174</span>
<span id="1175">1175</span>
<span id="1176">1176</span>
<span id="1177">1177</span>
<span id="1178">1178</span>
<span id="1179">1179</span>
<span id="1180">1180</span>
<span id="1181">1181</span>
<span id="1182">1182</span>
<span id="1183">1183</span>
<span id="1184">1184</span>
<span id="1185">1185</span>
<span id="1186">1186</span>
<span id="1187">1187</span>
<span id="1188">1188</span>
<span id="1189">1189</span>
<span id="1190">1190</span>
<span id="1191">1191</span>
<span id="1192">1192</span>
<span id="1193">1193</span>
<span id="1194">1194</span>
<span id="1195">1195</span>
<span id="1196">1196</span>
<span id="1197">1197</span>
<span id="1198">1198</span>
<span id="1199">1199</span>
<span id="1200">1200</span>
<span id="1201">1201</span>
<span id="1202">1202</span>
<span id="1203">1203</span>
<span id="1204">1204</span>
<span id="1205">1205</span>
<span id="1206">1206</span>
<span id="1207">1207</span>
<span id="1208">1208</span>
<span id="1209">1209</span>
<span id="1210">1210</span>
<span id="1211">1211</span>
<span id="1212">1212</span>
<span id="1213">1213</span>
<span id="1214">1214</span>
<span id="1215">1215</span>
<span id="1216">1216</span>
<span id="1217">1217</span>
<span id="1218">1218</span>
<span id="1219">1219</span>
<span id="1220">1220</span>
<span id="1221">1221</span>
<span id="1222">1222</span>
<span id="1223">1223</span>
<span id="1224">1224</span>
<span id="1225">1225</span>
<span id="1226">1226</span>
<span id="1227">1227</span>
<span id="1228">1228</span>
<span id="1229">1229</span>
<span id="1230">1230</span>
<span id="1231">1231</span>
<span id="1232">1232</span>
<span id="1233">1233</span>
<span id="1234">1234</span>
<span id="1235">1235</span>
<span id="1236">1236</span>
<span id="1237">1237</span>
<span id="1238">1238</span>
<span id="1239">1239</span>
<span id="1240">1240</span>
<span id="1241">1241</span>
<span id="1242">1242</span>
<span id="1243">1243</span>
<span id="1244">1244</span>
<span id="1245">1245</span>
<span id="1246">1246</span>
<span id="1247">1247</span>
<span id="1248">1248</span>
<span id="1249">1249</span>
<span id="1250">1250</span>
<span id="1251">1251</span>
<span id="1252">1252</span>
<span id="1253">1253</span>
<span id="1254">1254</span>
<span id="1255">1255</span>
<span id="1256">1256</span>
<span id="1257">1257</span>
<span id="1258">1258</span>
<span id="1259">1259</span>
<span id="1260">1260</span>
<span id="1261">1261</span>
<span id="1262">1262</span>
<span id="1263">1263</span>
<span id="1264">1264</span>
<span id="1265">1265</span>
<span id="1266">1266</span>
<span id="1267">1267</span>
<span id="1268">1268</span>
<span id="1269">1269</span>
<span id="1270">1270</span>
<span id="1271">1271</span>
<span id="1272">1272</span>
<span id="1273">1273</span>
<span id="1274">1274</span>
<span id="1275">1275</span>
<span id="1276">1276</span>
<span id="1277">1277</span>
<span id="1278">1278</span>
<span id="1279">1279</span>
<span id="1280">1280</span>
<span id="1281">1281</span>
<span id="1282">1282</span>
<span id="1283">1283</span>
<span id="1284">1284</span>
<span id="1285">1285</span>
<span id="1286">1286</span>
<span id="1287">1287</span>
<span id="1288">1288</span>
<span id="1289">1289</span>
<span id="1290">1290</span>
<span id="1291">1291</span>
<span id="1292">1292</span>
<span id="1293">1293</span>
<span id="1294">1294</span>
<span id="1295">1295</span>
<span id="1296">1296</span>
<span id="1297">1297</span>
<span id="1298">1298</span>
<span id="1299">1299</span>
<span id="1300">1300</span>
<span id="1301">1301</span>
<span id="1302">1302</span>
<span id="1303">1303</span>
<span id="1304">1304</span>
<span id="1305">1305</span>
<span id="1306">1306</span>
<span id="1307">1307</span>
<span id="1308">1308</span>
<span id="1309">1309</span>
<span id="1310">1310</span>
<span id="1311">1311</span>
<span id="1312">1312</span>
<span id="1313">1313</span>
<span id="1314">1314</span>
<span id="1315">1315</span>
<span id="1316">1316</span>
<span id="1317">1317</span>
<span id="1318">1318</span>
<span id="1319">1319</span>
<span id="1320">1320</span>
<span id="1321">1321</span>
<span id="1322">1322</span>
<span id="1323">1323</span>
<span id="1324">1324</span>
<span id="1325">1325</span>
<span id="1326">1326</span>
<span id="1327">1327</span>
<span id="1328">1328</span>
<span id="1329">1329</span>
<span id="1330">1330</span>
<span id="1331">1331</span>
<span id="1332">1332</span>
<span id="1333">1333</span>
<span id="1334">1334</span>
<span id="1335">1335</span>
<span id="1336">1336</span>
<span id="1337">1337</span>
<span id="1338">1338</span>
<span id="1339">1339</span>
<span id="1340">1340</span>
<span id="1341">1341</span>
<span id="1342">1342</span>
<span id="1343">1343</span>
<span id="1344">1344</span>
<span id="1345">1345</span>
<span id="1346">1346</span>
<span id="1347">1347</span>
<span id="1348">1348</span>
<span id="1349">1349</span>
<span id="1350">1350</span>
<span id="1351">1351</span>
<span id="1352">1352</span>
<span id="1353">1353</span>
<span id="1354">1354</span>
<span id="1355">1355</span>
<span id="1356">1356</span>
<span id="1357">1357</span>
<span id="1358">1358</span>
<span id="1359">1359</span>
<span id="1360">1360</span>
<span id="1361">1361</span>
<span id="1362">1362</span>
<span id="1363">1363</span>
<span id="1364">1364</span>
<span id="1365">1365</span>
<span id="1366">1366</span>
<span id="1367">1367</span>
<span id="1368">1368</span>
<span id="1369">1369</span>
<span id="1370">1370</span>
<span id="1371">1371</span>
<span id="1372">1372</span>
<span id="1373">1373</span>
<span id="1374">1374</span>
<span id="1375">1375</span>
<span id="1376">1376</span>
<span id="1377">1377</span>
<span id="1378">1378</span>
<span id="1379">1379</span>
<span id="1380">1380</span>
<span id="1381">1381</span>
<span id="1382">1382</span>
<span id="1383">1383</span>
<span id="1384">1384</span>
<span id="1385">1385</span>
<span id="1386">1386</span>
<span id="1387">1387</span>
<span id="1388">1388</span>
<span id="1389">1389</span>
<span id="1390">1390</span>
<span id="1391">1391</span>
<span id="1392">1392</span>
<span id="1393">1393</span>
<span id="1394">1394</span>
<span id="1395">1395</span>
<span id="1396">1396</span>
<span id="1397">1397</span>
<span id="1398">1398</span>
<span id="1399">1399</span>
<span id="1400">1400</span>
<span id="1401">1401</span>
<span id="1402">1402</span>
<span id="1403">1403</span>
<span id="1404">1404</span>
<span id="1405">1405</span>
<span id="1406">1406</span>
<span id="1407">1407</span>
<span id="1408">1408</span>
<span id="1409">1409</span>
<span id="1410">1410</span>
<span id="1411">1411</span>
<span id="1412">1412</span>
<span id="1413">1413</span>
<span id="1414">1414</span>
<span id="1415">1415</span>
<span id="1416">1416</span>
<span id="1417">1417</span>
<span id="1418">1418</span>
<span id="1419">1419</span>
<span id="1420">1420</span>
<span id="1421">1421</span>
<span id="1422">1422</span>
<span id="1423">1423</span>
<span id="1424">1424</span>
<span id="1425">1425</span>
<span id="1426">1426</span>
<span id="1427">1427</span>
<span id="1428">1428</span>
<span id="1429">1429</span>
<span id="1430">1430</span>
<span id="1431">1431</span>
<span id="1432">1432</span>
<span id="1433">1433</span>
<span id="1434">1434</span>
<span id="1435">1435</span>
<span id="1436">1436</span>
<span id="1437">1437</span>
<span id="1438">1438</span>
<span id="1439">1439</span>
<span id="1440">1440</span>
<span id="1441">1441</span>
<span id="1442">1442</span>
<span id="1443">1443</span>
<span id="1444">1444</span>
<span id="1445">1445</span>
<span id="1446">1446</span>
<span id="1447">1447</span>
<span id="1448">1448</span>
<span id="1449">1449</span>
<span id="1450">1450</span>
<span id="1451">1451</span>
<span id="1452">1452</span>
<span id="1453">1453</span>
<span id="1454">1454</span>
<span id="1455">1455</span>
<span id="1456">1456</span>
<span id="1457">1457</span>
<span id="1458">1458</span>
<span id="1459">1459</span>
<span id="1460">1460</span>
<span id="1461">1461</span>
<span id="1462">1462</span>
<span id="1463">1463</span>
<span id="1464">1464</span>
<span id="1465">1465</span>
<span id="1466">1466</span>
<span id="1467">1467</span>
<span id="1468">1468</span>
<span id="1469">1469</span>
<span id="1470">1470</span>
<span id="1471">1471</span>
<span id="1472">1472</span>
<span id="1473">1473</span>
<span id="1474">1474</span>
<span id="1475">1475</span>
<span id="1476">1476</span>
<span id="1477">1477</span>
<span id="1478">1478</span>
<span id="1479">1479</span>
<span id="1480">1480</span>
<span id="1481">1481</span>
<span id="1482">1482</span>
<span id="1483">1483</span>
<span id="1484">1484</span>
<span id="1485">1485</span>
<span id="1486">1486</span>
<span id="1487">1487</span>
<span id="1488">1488</span>
<span id="1489">1489</span>
<span id="1490">1490</span>
<span id="1491">1491</span>
<span id="1492">1492</span>
<span id="1493">1493</span>
<span id="1494">1494</span>
<span id="1495">1495</span>
<span id="1496">1496</span>
<span id="1497">1497</span>
<span id="1498">1498</span>
<span id="1499">1499</span>
<span id="1500">1500</span>
<span id="1501">1501</span>
<span id="1502">1502</span>
<span id="1503">1503</span>
<span id="1504">1504</span>
<span id="1505">1505</span>
<span id="1506">1506</span>
<span id="1507">1507</span>
<span id="1508">1508</span>
<span id="1509">1509</span>
<span id="1510">1510</span>
<span id="1511">1511</span>
<span id="1512">1512</span>
<span id="1513">1513</span>
<span id="1514">1514</span>
<span id="1515">1515</span>
<span id="1516">1516</span>
<span id="1517">1517</span>
<span id="1518">1518</span>
<span id="1519">1519</span>
<span id="1520">1520</span>
<span id="1521">1521</span>
<span id="1522">1522</span>
<span id="1523">1523</span>
<span id="1524">1524</span>
<span id="1525">1525</span>
<span id="1526">1526</span>
<span id="1527">1527</span>
<span id="1528">1528</span>
<span id="1529">1529</span>
<span id="1530">1530</span>
<span id="1531">1531</span>
<span id="1532">1532</span>
<span id="1533">1533</span>
<span id="1534">1534</span>
<span id="1535">1535</span>
<span id="1536">1536</span>
<span id="1537">1537</span>
<span id="1538">1538</span>
<span id="1539">1539</span>
<span id="1540">1540</span>
<span id="1541">1541</span>
<span id="1542">1542</span>
<span id="1543">1543</span>
<span id="1544">1544</span>
<span id="1545">1545</span>
<span id="1546">1546</span>
<span id="1547">1547</span>
<span id="1548">1548</span>
<span id="1549">1549</span>
<span id="1550">1550</span>
<span id="1551">1551</span>
<span id="1552">1552</span>
<span id="1553">1553</span>
<span id="1554">1554</span>
<span id="1555">1555</span>
<span id="1556">1556</span>
<span id="1557">1557</span>
<span id="1558">1558</span>
<span id="1559">1559</span>
<span id="1560">1560</span>
<span id="1561">1561</span>
<span id="1562">1562</span>
<span id="1563">1563</span>
<span id="1564">1564</span>
<span id="1565">1565</span>
<span id="1566">1566</span>
<span id="1567">1567</span>
<span id="1568">1568</span>
<span id="1569">1569</span>
<span id="1570">1570</span>
<span id="1571">1571</span>
<span id="1572">1572</span>
<span id="1573">1573</span>
<span id="1574">1574</span>
<span id="1575">1575</span>
<span id="1576">1576</span>
<span id="1577">1577</span>
<span id="1578">1578</span>
<span id="1579">1579</span>
<span id="1580">1580</span>
<span id="1581">1581</span>
<span id="1582">1582</span>
<span id="1583">1583</span>
<span id="1584">1584</span>
<span id="1585">1585</span>
<span id="1586">1586</span>
<span id="1587">1587</span>
<span id="1588">1588</span>
<span id="1589">1589</span>
<span id="1590">1590</span>
<span id="1591">1591</span>
<span id="1592">1592</span>
<span id="1593">1593</span>
<span id="1594">1594</span>
<span id="1595">1595</span>
<span id="1596">1596</span>
<span id="1597">1597</span>
<span id="1598">1598</span>
<span id="1599">1599</span>
<span id="1600">1600</span>
<span id="1601">1601</span>
<span id="1602">1602</span>
<span id="1603">1603</span>
<span id="1604">1604</span>
<span id="1605">1605</span>
<span id="1606">1606</span>
<span id="1607">1607</span>
<span id="1608">1608</span>
<span id="1609">1609</span>
<span id="1610">1610</span>
<span id="1611">1611</span>
<span id="1612">1612</span>
<span id="1613">1613</span>
<span id="1614">1614</span>
<span id="1615">1615</span>
<span id="1616">1616</span>
<span id="1617">1617</span>
<span id="1618">1618</span>
<span id="1619">1619</span>
<span id="1620">1620</span>
<span id="1621">1621</span>
<span id="1622">1622</span>
<span id="1623">1623</span>
</pre><pre class="rust"><code><span class="doccomment">//! prepare_zip_mod.rs should not use any javascript objects. Pure Rust.</span>
<span class="doccomment">//! All the javascript objects, functions and conversion should be in web_sys_mod.rs.</span>

<span class="kw">use</span> <span class="kw">crate</span>::{<span class="ident">web_sys_mod</span>::<span class="kw-2">*</span>, <span class="ident">PwaData</span>};
<span class="kw">use</span> <span class="ident">std::io::Write</span>;
<span class="kw">use</span> <span class="ident">unwrap::unwrap</span>;

<span class="doccomment">/// create and fill zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">create_and_fill_zip</span>(<span class="ident">vec</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>, <span class="ident">pwa_data</span>: <span class="ident">PwaData</span>) {
    <span class="comment">// get date time now</span>
    <span class="kw">let</span> <span class="ident">now</span> <span class="op">=</span> <span class="ident">date_time_now</span>();

    <span class="kw">let</span> <span class="ident">img</span> <span class="op">=</span> <span class="ident">decode_png</span>(<span class="ident">vec</span>);
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">buf</span> <span class="op">=</span> <span class="kw-2">&amp;mut</span> <span class="macro">vec!</span>[<span class="number">0u8</span>; <span class="number">2_097_152</span>];
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">zip</span> <span class="op">=</span> <span class="ident">create_new_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">buf</span>);

    <span class="comment">// favicon.ico with 16, 32 and 48 icons</span>
    <span class="ident">encode_to_favicon_ico_and_add_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">img</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);

    <span class="comment">// region: png with various sizes for: favicon png, pwa Android and pwa iOS</span>
    <span class="comment">// 32, 72, 96, 120, 128, 144, 152, 167, 180, 192, 196, 512</span>
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">32</span>,
        <span class="string">&quot;icon-032.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">72</span>,
        <span class="string">&quot;icon-072.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">96</span>,
        <span class="string">&quot;icon-096.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">120</span>,
        <span class="string">&quot;icon-120.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">128</span>,
        <span class="string">&quot;icon-128.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">144</span>,
        <span class="string">&quot;icon-144.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">152</span>,
        <span class="string">&quot;icon-152.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">167</span>,
        <span class="string">&quot;icon-167.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">180</span>,
        <span class="string">&quot;icon-180.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">192</span>,
        <span class="string">&quot;icon-192.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">196</span>,
        <span class="string">&quot;icon-196.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">512</span>,
        <span class="string">&quot;icon-512.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );

    <span class="comment">// maskable icon 192</span>
    <span class="ident">resize_img_and_add_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">img</span>,
        <span class="number">192</span>,
        <span class="string">&quot;icon-maskable.png&quot;</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="comment">// endregion</span>

    <span class="comment">// text files</span>
    <span class="ident">add_manifest_json_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">pwa_short_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">pwa_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
    );
    <span class="ident">add_index_html_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">pwa_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">pwa_description</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
    );
    <span class="ident">add_service_worker_js_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_start_service_worker_js_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_css_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);

    <span class="ident">add_rust_yml_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_automation_tasks_rs_main_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_homepage</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_author</span>,
    );
    <span class="ident">add_automation_gitignore_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_automation_cargo_toml_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_src_lib_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_src_dom_mod_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_src_web_sys_mod_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);

    <span class="ident">add_license_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_author</span>,
    );
    <span class="ident">add_cargo_toml_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">pwa_description</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_author</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_homepage</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_repository</span>,
    );
    <span class="ident">add_readme_md_to_zip</span>(
        <span class="kw-2">&amp;mut</span> <span class="ident">zip</span>,
        <span class="kw-2">&amp;</span><span class="ident">now</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_homepage</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_repository</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">project_author</span>,
        <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">pwa_description</span>,
    );
    <span class="ident">add_gitignore_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);
    <span class="ident">add_vscode_settings_to_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>, <span class="kw-2">&amp;</span><span class="ident">now</span>, <span class="kw-2">&amp;</span><span class="ident">pwa_data</span>.<span class="ident">rust_project_name</span>);

    <span class="kw">let</span> <span class="ident">url</span> <span class="op">=</span> <span class="ident">finish_zip</span>(<span class="kw-2">&amp;mut</span> <span class="ident">zip</span>);
    <span class="ident">append_anchor_for_file_url</span>(<span class="kw-2">&amp;</span><span class="ident">url</span>, <span class="string">&quot;new_rust_wasm_pwa.zip&quot;</span>);
    <span class="ident">append_final_comment</span>(<span class="string">&quot;Finally extract the zip and open the new folder in your favorite Rust code editor. There read the README.md for further instructions.&quot;</span>);
}

<span class="doccomment">/// create a zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">create_new_zip</span>(<span class="ident">buf</span>: <span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]) -&gt; <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span> {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;create_new_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">w</span> <span class="op">=</span> <span class="ident">std::io::Cursor::new</span>(<span class="ident">buf</span>);
    <span class="kw">let</span> <span class="ident">zip</span> <span class="op">=</span> <span class="ident">zip::ZipWriter::new</span>(<span class="ident">w</span>);
    <span class="comment">// return</span>
    <span class="ident">zip</span>
}

<span class="doccomment">/// resize img and append anchor</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">resize_img_and_add_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">img</span>: <span class="kw-2">&amp;</span><span class="ident">image::DynamicImage</span>,
    <span class="ident">img_size</span>: <span class="ident">u32</span>,
    <span class="ident">file_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;resize_img_and_add_to_zip img {}&quot;</span>, <span class="ident">img_size</span>));
    <span class="kw">let</span> <span class="ident">new_img</span> <span class="op">=</span> <span class="ident">img</span>.<span class="ident">resize</span>(<span class="ident">img_size</span>, <span class="ident">img_size</span>, <span class="ident">image::imageops::FilterType::Lanczos3</span>);
    <span class="kw">let</span> <span class="ident">vec_u8</span> <span class="op">=</span> <span class="ident">encode_to_png</span>(<span class="ident">new_img</span>);

    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="kw">let</span> <span class="ident">file_name</span> <span class="op">=</span>
        <span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/web_server_folder/{rust_project_name}/icons/{file_name}&quot;</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="ident">file_name</span>, <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(<span class="kw-2">&amp;</span><span class="ident">vec_u8</span>));
}

<span class="doccomment">/// add manifest.json to zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_manifest_json_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">pwa_short_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">pwa_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_manifest_json_to_zip&quot;</span>));

    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/web_server_folder/{rust_project_name}/manifest.json&quot;</span>),
        <span class="ident">options</span>
    ));

    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;{
&quot;short_name&quot;: &quot;{pwa_short_name}&quot;,
&quot;name&quot;: &quot;{pwa_name}&quot;,
&quot;icons&quot;: [
    {
        &quot;src&quot;: &quot;icons/icon-072.png&quot;,
        &quot;sizes&quot;: &quot;72x72&quot;,
        &quot;type&quot;: &quot;image/png&quot;,
        &quot;density&quot;: &quot;1.5&quot;
    },
    {
        &quot;src&quot;: &quot;icons/icon-096.png&quot;,
        &quot;sizes&quot;: &quot;96x96&quot;,
        &quot;type&quot;: &quot;image/png&quot;,
        &quot;density&quot;: &quot;2.0&quot;
    },
    {
        &quot;src&quot;: &quot;icons/icon-128.png&quot;,
        &quot;sizes&quot;: &quot;128x128&quot;,
        &quot;type&quot;: &quot;image/png&quot;,
        &quot;density&quot;: &quot;2.5&quot;
    },
    {
        &quot;src&quot;: &quot;icons/icon-144.png&quot;,
        &quot;sizes&quot;: &quot;144x144&quot;,
        &quot;type&quot;: &quot;image/png&quot;,
        &quot;density&quot;: &quot;3.0&quot;
    },
    {
        &quot;src&quot;: &quot;icons/icon-152.png&quot;,
        &quot;sizes&quot;: &quot;152x152&quot;,
        &quot;type&quot;: &quot;image/png&quot;,
        &quot;density&quot;: &quot;3.2&quot;
    },
    {
        &quot;src&quot;: &quot;icons/icon-192.png&quot;,
        &quot;sizes&quot;: &quot;192x192&quot;,
        &quot;type&quot;: &quot;image/png&quot;,
        &quot;density&quot;: &quot;4.0&quot;
    },
    {
        &quot;src&quot;: &quot;icons/icon-512.png&quot;,
        &quot;sizes&quot;: &quot;512x512&quot;,
        &quot;type&quot;: &quot;image/png&quot;            
    },
    {
        &quot;src&quot;: &quot;icons/icon-maskable.png&quot;,
        &quot;sizes&quot;: &quot;192x192&quot;,
        &quot;type&quot;: &quot;image/png&quot;,
        &quot;density&quot;: &quot;4.0&quot;,
        &quot;purpose&quot;: &quot;any maskable&quot;
    }
],
&quot;start_url&quot;: &quot;/{rust_project_name}/index.html&quot;,
&quot;background_color&quot;: &quot;#000000&quot;,
&quot;display&quot;: &quot;standalone&quot;,
&quot;orientation&quot;: &quot;portrait&quot;,
&quot;theme_color&quot;: &quot;#000000&quot;
}&quot;##</span>
        .<span class="ident">replace</span>(<span class="string">&quot;{pwa_short_name}&quot;</span>, <span class="ident">pwa_short_name</span>)
        .<span class="ident">replace</span>(<span class="string">&quot;{pwa_name}&quot;</span>, <span class="ident">pwa_name</span>)
        .<span class="ident">replace</span>(<span class="string">&quot;{rust_project_name}&quot;</span>, <span class="ident">rust_project_name</span>)
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="doccomment">/// add index.html to zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_index_html_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">pwa_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">pwa_description</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_index_html_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/web_server_folder/{rust_project_name}/index.html&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;!-- classic header for a web page --&gt;
        &lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
        &lt;title&gt;{pwa_name}&lt;/title&gt;
        &lt;meta name=&quot;Description&quot; content=&quot;{pwa_description}&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width = device-width,initial-scale = 1.0&quot; /&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;css/{rust_project_name}.css&quot;&gt;
            
        &lt;!-- favicons generic--&gt;
        &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;icons/icon-032.png&quot; sizes=&quot;32x32&quot;&gt;
        &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;icons/icon-128.png&quot; sizes=&quot;128x128&quot;&gt;
        &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;icons/icon-192.png&quot; sizes=&quot;192x192&quot;&gt;
        &lt;!-- favicons Android --&gt;
        &lt;link rel=&quot;shortcut icon&quot; href=&quot;icons/icon-196.png&quot; sizes=&quot;196x196&quot;&gt;
        &lt;!-- favicons iOS --&gt;
        &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;icons/icon-152.png&quot; sizes=&quot;152x152&quot;&gt;
        &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;icons/icon-167.png&quot; sizes=&quot;167x167&quot;&gt;
        &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;icons/icon-180.png&quot; sizes=&quot;180x180&quot;&gt;

        &lt;!-- Metadata for PWA --&gt;
        &lt;link rel=&quot;manifest&quot; href=&quot;manifest.json&quot;&gt;
        &lt;meta name=&quot;mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;
        &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;
        &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black-translucent&quot; /&gt;
        &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;
        &lt;link rel=&quot;apple-touch-icon&quot; sizes=&quot;120x120&quot; href=&quot;icons/icon-120.png&quot;&gt;
        &lt;link rel=&quot;apple-touch-icon&quot; sizes=&quot;180x180&quot; href=&quot;icons/icon-180.png&quot;&gt;
    &lt;/head&gt;
&lt;body&gt;
    &lt;!-- a standard service worker is a must for PWA --&gt;
    &lt;script src=&quot;start_service_worker.js&quot;&gt;&lt;/script&gt;
    &lt;!-- warning if javascript is not enabled --&gt;
    &lt;noscript&gt;
        &lt;h2&gt;
                !!!???!!!&lt;br&gt;
                This web app &lt;br&gt;
                cannot work &lt;br&gt;
                without javascript&lt;br&gt;
                enabled&lt;br&gt;
                !!!???!!!&lt;/h2&gt;
    &lt;/noscript&gt;

        &lt;!-- display a text while waiting for wasm download. 
      This content will change from the wasm code.--&gt;
      &lt;div id=&quot;div_for_wasm_html_injecting&quot;&gt;
        &lt;h2&gt;
            Waiting to&lt;br&gt; download &lt;br&gt; the web app...&lt;br&gt; This is &lt;br&gt; very quick on fast&lt;br&gt; networks...
            &lt;br&gt;
        &lt;/h2&gt;
    &lt;/div&gt;

    &lt;!-- import and init the wasm code --&gt;
    &lt;script type=&quot;module&quot;&gt;
        import init from &quot;./pkg/{rust_project_name}.js&quot;; init(&quot;./pkg/{rust_project_name}_bg.wasm&quot;);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
    &quot;##</span>
        .<span class="ident">replace</span>(<span class="string">&quot;{pwa_name}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">html_encode</span>(<span class="kw-2">&amp;</span><span class="ident">pwa_name</span>))
        .<span class="ident">replace</span>(<span class="string">&quot;{pwa_description}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">html_encode</span>(<span class="kw-2">&amp;</span><span class="ident">pwa_description</span>))
        .<span class="ident">replace</span>(<span class="string">&quot;{rust_project_name}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">html_encode</span>(<span class="kw-2">&amp;</span><span class="ident">rust_project_name</span>))
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="doccomment">/// add service_worker.js to zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_service_worker_js_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_service_worker_js_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/web_server_folder/{rust_project_name}/service_worker.js&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="kw">let</span> <span class="ident">version_from_date</span> <span class="op">=</span> <span class="macro">format!</span>(
        <span class="string">&quot;{}.{}{:02}.{}{:02}&quot;</span>,
        <span class="ident">now</span>.<span class="ident">year</span>(),
        <span class="ident">now</span>.<span class="ident">month</span>(),
        <span class="ident">now</span>.<span class="ident">day</span>(),
        <span class="ident">now</span>.<span class="ident">hour</span>(),
        <span class="ident">now</span>.<span class="ident">minute</span>()
    );
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
&#39;use strict&#39;;

// Incrementing VERSION in CACHE_NAME will kick off the 
// install event and force previously cached
// resources to be cached again.
// but the new service worker will not be activated until all 
// tabs with this webapp are closed.

const CACHE_NAME = &#39;{version_from_date}&#39;;

self.addEventListener(&#39;install&#39;, event =&gt; {
    console.log(&#39;event install &#39;, CACHE_NAME);
    // the ugly trick of avoiding the waiting phase
    self.skipWaiting();

    event.waitUntil(
        caches.open(CACHE_NAME).then(function (cache) {
            return cache.addAll(
                [
                    &#39;index.html&#39;,
                ]
            );
        })
    );
});

self.addEventListener(&#39;activate&#39;, event =&gt; {
    console.log(&#39;event activate&#39;);
    // Delete all caches that aren&#39;t CACHE_NAME.
    event.waitUntil(
        caches.keys().then(cacheNames =&gt; {
            return Promise.all(
                cacheNames.map(cacheName =&gt; {
                    if (CACHE_NAME.indexOf(cacheName) === -1) {
                        // If this cache name isn&#39;t right, then delete it.
                        console.log(&#39;Deleting out of date cache:&#39;, cacheName);
                        return caches.delete(cacheName);
                    }
                })
            );
        })
    );
});

self.addEventListener(&#39;fetch&#39;, event =&gt; {
    // console.log(&#39;event fetch&#39;);
    // Let the browser do its default thing
    // for non-GET requests.
    if (event.request.method != &#39;GET&#39;) return;

    // Prevent the default, and handle the request ourselves.
    event.respondWith(async function () {
        // Try to get the response from a cache.
        const cache = await caches.open(CACHE_NAME);
        const cachedResponse = await cache.match(event.request);

        if (cachedResponse) {
            // console.log(&#39;from cache&#39;);
            // If we found a match in the cache, return it, but also
            // update the entry in the cache in the background.
            event.waitUntil(cache.add(event.request));
            return cachedResponse;
        }

        // If we didn&#39;t find a match in the cache, use the network and cache it for later.
        const response = await fetch(event.request);
        cache.put(event.request, response.clone());
        return response;
    }());
});
&quot;##</span>
        .<span class="ident">replace</span>(<span class="string">&quot;{version_from_date}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">version_from_date</span>)
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="doccomment">/// add start_service_worker.js to zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_start_service_worker_js_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_start_service_worker_js_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(
            <span class="string">&quot;{rust_project_name}/web_server_folder/{rust_project_name}/start_service_worker.js&quot;</span>
        ),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
if (&#39;serviceWorker&#39; in navigator) {
    navigator.serviceWorker.register(&#39;service_worker.js&#39;).then(function (registration) {
        console.log(&#39;Registration succeeded.&#39;);
    }).catch(function (error) {
        console.log(&#39;Registration failed with &#39; + error);
    });
};
//Listen for claiming of our ServiceWorker
navigator.serviceWorker.addEventListener(&#39;controllerchange&#39;, function () {
    console.log(&#39;Service worker status changed: &#39;, this.controller.state);
    // Listen for changes in the state of our ServiceWorker
    navigator.serviceWorker.controller.addEventListener(&#39;statechange&#39;, function () {
        // If the ServiceWorker becomes &quot;activated&quot;, let the user know they can go offline!
        if (this.state === &#39;activated&#39;) {
            window.location.reload();
        }
    });
});
&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="doccomment">/// add css to zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_css_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_css_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(
            <span class="string">&quot;{rust_project_name}/web_server_folder/{rust_project_name}/css/{rust_project_name}.css&quot;</span>
        ),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
/* css variables */
:root {
    /* color palette */
    /* use of variables: var(--color_tooltip_1); */
    /* users can simply change the colors with the chrome extension: user CSS
    https://chrome.google.com/webstore/detail/user-css/okpjlejfhacmgjkmknjhadmkdbcldfcb
    */
    /* background color */
    --b_color_body: #24292E;
    --b_color_button: dodgerblue;
    /* front color */
    --f_color_body: #c4cce0;
    --f_color_link: white;
}

/* region: basics */

html {
    font-family: &#39;Roboto&#39;, sans-serif;
    max-width: 1200px;
    min-width: 300px;
    width: 100%;
    /*margin auto means centered horizontally*/
    margin: auto;
    padding-right: 0px;
    overflow-y: auto;
    overflow-x: hidden;
    word-wrap: break-word;
    overflow-wrap: break-word;
    box-sizing: border-box;
    background-color: var(--b_color_body);
    line-height: 1.5;
    color: var(--f_color_body);
    /*This is the base font-size. All other font-size 
use rem units that are
relative to this font-size.*/
    /*width greater than 600 px*/
    font-size: 34px;
    -webkit-font-smoothing: antialiased;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.004);
}

body {
    max-width: 600px;
    margin: 0;
    padding: 0;
    font-size: 60%;
    line-height: 1.5;
    background-color: var(--b_color_body);
    color: var(--f_color_body);
}
/*CSS Reset*/

div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, 
a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, 
q, s, samp, small, strike, strong, sub,
sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label,
legend, table, caption, tbody, tfoot, thead, tr, th,
td {
    margin: 0;
    padding: 0;
    border: 0;
    border-style: none;
    outline: 0;
    vertical-align: baseline;
    background: transparent;
}

/* no color */
a:link,
a:visited,
a:hover,
a:active {
    color: inherit;
    text-decoration: none;
}

h1,
h2,
h3,
h4 {
    margin-bottom: 16px;
}

p {
    line-height: 1.5;
}

pre {
    white-space: pre-wrap;
}

input[type=text] {
    background-color: var(--b_color_code);
    color: var(--f_color_link);
    width: 600px;
    border-color:var(--b_color_button);
    border-width: 3px;
    border-radius: 6px;
    padding: 2px;
    font-size: 100%;
    font-family: Consolas, Liberation Mono, Courier, monospace;
}

/* endregion: basics */

.button {
    background: var(--b_color_button);
    border-radius: 6px;
    font-size: 120%;
}

&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="doccomment">/// finish zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">finish_zip</span>(<span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>) -&gt; <span class="ident">String</span> {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;finish_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">zip_result</span>: <span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span> <span class="op">=</span> <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">finish</span>());
    <span class="kw">let</span> <span class="ident">pos</span> <span class="op">=</span> <span class="ident">zip_result</span>.<span class="ident">position</span>();
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">vec_u8</span> <span class="op">=</span> <span class="ident">zip_result</span>.<span class="ident">into_inner</span>().<span class="ident">to_vec</span>();
    <span class="ident">vec_u8</span>.<span class="ident">truncate</span>(<span class="ident">pos</span> <span class="kw">as</span> <span class="ident">usize</span>);
    <span class="kw">let</span> <span class="ident">url</span> <span class="op">=</span> <span class="ident">create_download_url</span>(<span class="ident">vec_u8</span>);
    <span class="comment">// return</span>
    <span class="ident">url</span>
}

<span class="doccomment">/// decode png</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">decode_png</span>(<span class="ident">vec</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>) -&gt; <span class="ident">image::DynamicImage</span> {
    <span class="kw">let</span> <span class="ident">img</span> <span class="op">=</span> <span class="ident">image::io::Reader::new</span>(<span class="ident">std::io::Cursor::new</span>(<span class="ident">vec</span>));
    <span class="kw">let</span> <span class="ident">img</span> <span class="op">=</span> <span class="macro">unwrap!</span>(<span class="ident">img</span>.<span class="ident">with_guessed_format</span>());
    <span class="kw">let</span> <span class="ident">img</span> <span class="op">=</span> <span class="macro">unwrap!</span>(<span class="ident">img</span>.<span class="ident">decode</span>());
    <span class="comment">// return</span>
    <span class="ident">img</span>
}

<span class="doccomment">/// encode to png</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">encode_to_png</span>(<span class="ident">new_img</span>: <span class="ident">image::DynamicImage</span>) -&gt; <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span> {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;encode new_img&quot;</span>));
    <span class="kw">let</span> <span class="ident">vec_u8</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Vec::new</span>();
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cursor_1</span> <span class="op">=</span> <span class="ident">std::io::Cursor::new</span>(<span class="ident">vec_u8</span>);
    <span class="kw">let</span> <span class="ident">_x</span> <span class="op">=</span> <span class="macro">unwrap!</span>(<span class="ident">new_img</span>.<span class="ident">write_to</span>(<span class="kw-2">&amp;mut</span> <span class="ident">cursor_1</span>, <span class="ident">image::ImageOutputFormat::Png</span>));
    <span class="comment">// return</span>
    <span class="ident">cursor_1</span>.<span class="ident">get_ref</span>().<span class="ident">to_owned</span>()
}

<span class="comment">// favicon.ico with 16 and 32 icons</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">encode_to_favicon_ico_and_add_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">img</span>: <span class="kw-2">&amp;</span><span class="ident">image::DynamicImage</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="comment">// Create a new, empty icon collection:</span>
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">icon_dir</span> <span class="op">=</span> <span class="ident">ico::IconDir::new</span>(<span class="ident">ico::ResourceType::Icon</span>);
    <span class="ident">favicon_add_entry</span>(<span class="ident">img</span>, <span class="number">16</span>, <span class="kw-2">&amp;mut</span> <span class="ident">icon_dir</span>);
    <span class="ident">favicon_add_entry</span>(<span class="ident">img</span>, <span class="number">32</span>, <span class="kw-2">&amp;mut</span> <span class="ident">icon_dir</span>);
    <span class="ident">favicon_add_entry</span>(<span class="ident">img</span>, <span class="number">48</span>, <span class="kw-2">&amp;mut</span> <span class="ident">icon_dir</span>);

    <span class="comment">// Finally, add the ICO file to zip:</span>
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/web_server_folder/{rust_project_name}/favicon.ico&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">icon_dir</span>.<span class="ident">write</span>(<span class="ident">zip</span>));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">favicon_add_entry</span>(<span class="ident">img</span>: <span class="kw-2">&amp;</span><span class="ident">image::DynamicImage</span>, <span class="ident">size</span>: <span class="ident">u32</span>, <span class="ident">icon_dir</span>: <span class="kw-2">&amp;mut</span> <span class="ident">ico::IconDir</span>) {
    <span class="comment">// icons need smaller images 48, 32 and 16</span>
    <span class="kw">let</span> <span class="ident">img_rgba_vec</span> <span class="op">=</span> <span class="ident">img</span>
        .<span class="ident">resize</span>(<span class="ident">size</span>, <span class="ident">size</span>, <span class="ident">image::imageops::FilterType::Lanczos3</span>)
        .<span class="ident">into_rgba8</span>()
        .<span class="ident">into_raw</span>();
    <span class="comment">// create an IconImage from raw RGBA pixel data from another image library</span>
    <span class="kw">let</span> <span class="ident">icon_image</span> <span class="op">=</span> <span class="ident">ico::IconImage::from_rgba_data</span>(<span class="ident">size</span>, <span class="ident">size</span>, <span class="ident">img_rgba_vec</span>);
    <span class="ident">icon_dir</span>.<span class="ident">add_entry</span>(<span class="ident">ico::IconDirEntry::encode</span>(<span class="kw-2">&amp;</span><span class="ident">icon_image</span>).<span class="ident">unwrap</span>());
}

<span class="doccomment">/// add .github/workflows/rust.yml to zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_rust_yml_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_rust_yml_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/.github/workflows/rust.yml&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
name: RustAction

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

env:
  CARGO_TERM_COLOR: always

jobs:
  fmt_build_test:

    runs-on: ubuntu-latest

    steps:
    - uses: jetli/wasm-pack-action@v0.3.0
      with:
        version: &#39;latest&#39;
    - uses: actions/checkout@v2
    - name: Fmt
      run: cargo fmt -- --check
    - name: Build
      run: wasm-pack build --target web --release

&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="doccomment">/// add .github/workflows/rust.yml to zip</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_automation_tasks_rs_main_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_homepage</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_author</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_automation_tasks_rs_main_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/automation_tasks_rs/src/main.rs&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
//! automation_tasks_rs for {rust_project_name}

use cargo_auto_lib::*;

// ANSI colors for Linux terminal
// https://github.com/shiena/ansicolor/blob/master/README.md
#[allow(dead_code)]
pub const RED: &amp;str = &quot;\x1b[31m&quot;;
#[allow(dead_code)]
pub const YELLOW: &amp;str = &quot;\x1b[33m&quot;;
#[allow(dead_code)]
pub const GREEN: &amp;str = &quot;\x1b[32m&quot;;
#[allow(dead_code)]
pub const RESET: &amp;str = &quot;\x1b[0m&quot;;


fn main() {
    exit_if_not_run_in_rust_project_root_directory();

    // get CLI arguments
    let mut args = std::env::args();
    // the zero argument is the name of the program
    let _arg_0 = args.next();
    match_arguments_and_call_tasks(args);
}

// region: match, help and completion

/// match arguments and call tasks functions
fn match_arguments_and_call_tasks(mut args: std::env::Args) {
    // the first argument is the user defined task: (no argument for help), build, release,...
    let arg_1 = args.next();
    match arg_1 {
        None =&gt; print_help(),
        Some(task) =&gt; {
            if &amp;task == &quot;completion&quot; {
                completion();
            } else {
                println!(&quot;{YELLOW}Running automation task: {task}{RESET}&quot;);
                if &amp;task == &quot;build&quot; {
                    task_build();
                } else if &amp;task == &quot;doc&quot; {
                    task_doc();
                } else if &amp;task == &quot;test&quot; {
                    task_test();
                } else if &amp;task == &quot;commit_and_push&quot; {
                    let arg_2 = args.next();
                    task_commit_and_push(arg_2);
                } else if &amp;task == &quot;publish_to_web&quot; {
                    task_publish_to_web();
                } else {
                    println!(&quot;{RED}Error: Task {task} is unknown.{RESET}&quot;);
                    print_help();
                }
            }
        }
    }
}

/// write a comprehensible help for user defined tasks
fn print_help() {
    println!(
        r#&quot;
    {YELLOW}Welcome to cargo-auto !
    This program automates your custom tasks when developing a Rust project.{RESET}

    User defined tasks in automation_tasks_rs:
cargo auto build - builds the crate with wasm-pack, fmt
cargo auto doc - builds the docs, copy to docs directory
cargo auto test - runs all the tests
cargo auto commit_and_push &quot;message&quot; - commits with message and push with mandatory message
    (If you use SSH, it is easy to start the ssh-agent in the background and ssh-add your credentials for git.)
cargo auto publish_to_web - publish to web, git tag
    (You need credentials for publishing over SSH. Use ssh-agent and ssh-add to store the credentials for SSH.)
&quot;#,
    );
    print_examples_cmd();
}

/// all example commands in one place
fn print_examples_cmd(){
/*
    println!(r#&quot;run examples:
cargo run --example example1
&quot;#);
*/
}

/// sub-command for bash auto-completion of `cargo auto` using the crate `dev_bestia_cargo_completion`
fn completion() {
    let args: Vec&lt;String&gt; = std::env::args().collect();
    let word_being_completed = args[2].as_str();
    let last_word = args[3].as_str();

    if last_word == &quot;cargo-auto&quot; || last_word == &quot;auto&quot; {
        let sub_commands = vec![&quot;build&quot;, &quot;doc&quot;, &quot;test&quot;, &quot;commit_and_push&quot;, &quot;publish_to_web&quot;];
        completion_return_one_or_more_sub_commands(sub_commands, word_being_completed);
    }
    /*
    // the second level if needed
    else if last_word == &quot;new&quot; {
        let sub_commands = vec![&quot;x&quot;];
        completion_return_one_or_more_sub_commands(sub_commands, word_being_completed);
    }
    */
}

// endregion: match, help and completion

// region: tasks

/// cargo build
fn task_build() {
    let cargo_toml = CargoToml::read();
    auto_version_increment_semver_or_date();
    run_shell_command(&quot;cargo fmt&quot;);    
    auto_cargo_toml_to_md();
    auto_lines_of_code(&quot;&quot;);
    run_shell_command(&quot;cargo fmt&quot;);
    run_shell_command(&quot;wasm-pack build --target web&quot;);
    run_shell_command(&quot;\\rsync -a --delete-after pkg/ web_server_folder/{rust_project_name}/pkg/&quot;);
    println!(
        r#&quot;{YELLOW}
    After `cargo auto build` open a separate bash terminal and run once
cd ~/rustprojects/{package_name}/web_server_folder; basic-http-server
    Then leave that terminal to run in the background. It will constantly serve the new files as you build.
    In VSCode open the port 4000 for forwarding from the docker container.
    Finally open the browser in Win10 on 
http://localhost:4000/{package_name}/

    if ok, then,
cargo auto doc
{RESET}&quot;#,
package_name = cargo_toml.package_name(),
    );
    print_examples_cmd();
}

/// cargo doc, then copies to /docs/ folder, because this is a github standard folder
fn task_doc() {
    let cargo_toml = CargoToml::read();
    auto_cargo_toml_to_md();
    auto_lines_of_code(&quot;&quot;);
    auto_plantuml(&amp;cargo_toml.package_repository().unwrap());
    auto_md_to_doc_comments();

    run_shell_command(&quot;cargo doc --no-deps --document-private-items&quot;);
    // copy target/doc into docs/ because it is github standard
    run_shell_command(&quot;rsync -a --info=progress2 --delete-after target/doc/ docs/&quot;);
    // Create simple index.html file in docs directory
    run_shell_command(&amp;format!(
        &quot;echo \&quot;&lt;meta http-equiv=\\\&quot;refresh\\\&quot; content=\\\&quot;0; url={}/index.html\\\&quot; /&gt;\&quot; &gt; docs/index.html&quot;,
        cargo_toml.package_name().replace(&quot;-&quot;,&quot;_&quot;)
    ));
    run_shell_command(&quot;cargo fmt&quot;);
    // message to help user with next move
    println!(
        r#&quot;{YELLOW}
    After `cargo auto doc`, check `docs/index.html`. If ok, then test the documentation code examples
cargo auto test
{RESET}&quot;#
    );
}

/// cargo test
fn task_test() {
    run_shell_command(&quot;cargo test&quot;);
    println!(
        r#&quot;{YELLOW}
    After `cargo auto test`. If ok, then 
cargo auto commit_and_push &quot;message&quot;
    with mandatory commit message
{RESET}&quot;#
    );
}

/// commit and push
fn task_commit_and_push(arg_2: Option&lt;String&gt;) {
    match arg_2 {
        None =&gt; println!(&quot;{RED}Error: Message for commit is mandatory.{RESET}&quot;),
        Some(message) =&gt; {
            run_shell_command(&amp;format!(r#&quot;git add -A &amp;&amp; git commit --allow-empty -m &quot;{}&quot;&quot;#, message));
            run_shell_command(&quot;git push&quot;);
            println!(
                r#&quot;{YELLOW}
    After `cargo auto commit_and_push &quot;message&quot;`
cargo auto publish_to_web
{RESET}&quot;#
            );
        }
    }
}

/// publish to web
fn task_publish_to_web() {
    println!(r#&quot;{YELLOW}Use ssh-agent and ssh-add to store your credentials for publish to web.{RESET}&quot;#);
    let cargo_toml = CargoToml::read();
    // git tag
    let shell_command = format!(
        &quot;git tag -f -a v{version} -m version_{version}&quot;,
        version = cargo_toml.package_version()
    );
    run_shell_command(&amp;shell_command);
    let shell_command = format!(
        &quot;rsync -e ssh -a --info=progress2 --delete-after ~/rustprojects/{package_name}/web_server_folder/ {project_author}@{project_homepage_domain}:/var/www/{project_homepage_domain}/{rust_project_name}/&quot;,
        package_name = cargo_toml.package_name()
    );
    run_shell_command(&amp;shell_command);
    println!(
        r#&quot;{YELLOW}
    After `cargo auto publish_to_web`, 
    check 
https://bestia.dev/{package_name}
{RESET}&quot;#,
        package_name = cargo_toml.package_name()
    );
}


// endregion: tasks

&quot;##</span>
.<span class="ident">replace</span>(<span class="string">&quot;{rust_project_name}&quot;</span>, <span class="ident">rust_project_name</span>)
.<span class="ident">replace</span>(<span class="string">&quot;{project_author}&quot;</span>, <span class="ident">project_author</span>)
.<span class="ident">replace</span>(<span class="string">&quot;{project_homepage_domain}&quot;</span>, <span class="ident">project_homepage</span>.<span class="ident">trim_start_matches</span>(<span class="string">&quot;https://&quot;</span>).<span class="ident">trim_start_matches</span>(<span class="string">&quot;http://&quot;</span>))
.<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_automation_gitignore_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_automation_gitignore_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/automation_tasks_rs/.gitignore&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
/target

&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_automation_cargo_toml_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_automation_cargo_toml_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/automation_tasks_rs/Cargo.toml&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
[package]
name = &quot;automation_tasks_rs&quot;
version = &quot;0.1.1&quot;
authors = [&quot;bestia.dev&quot;]
homepage = &quot;https://bestia.dev&quot;
edition = &quot;2021&quot;
description = &quot;cargo auto - automation tasks written in Rust language&quot;
publish = false

[dependencies]
cargo_auto_lib = &quot;0.7.42&quot;

&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_src_lib_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_src_lib_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/src/lib.rs&quot;</span>), <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
//! lib.rs is just for the wasm_bindgen_start function and to connect to all the modules.
//! and for the big doc comments
//!
// region: auto_md_to_doc_comments include README.md A //!
//! # bestia_dev_new_rust_wasm_pwa
//!
//! **Creates a new Rust Wasm PWA project**  
//! ***version: 2022.714.2048 date: 2022-07-14 author: [bestia.dev](https://bestia.dev) repository: [Github](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa_game)***  
//!
//! [![Lines in Rust code](https://img.shields.io/badge/Lines_in_Rust-1709-green.svg)](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/)
//! [![Lines in Doc comments](https://img.shields.io/badge/Lines_in_Doc_comments-76-blue.svg)](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/)
//! [![Lines in Comments](https://img.shields.io/badge/Lines_in_comments-97-purple.svg)](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/)
//! [![Lines in examples](https://img.shields.io/badge/Lines_in_examples-0-yellow.svg)](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/)
//! [![Lines in tests](https://img.shields.io/badge/Lines_in_tests-0-orange.svg)](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/)
//!
//! [![License](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/blob/master/LICENSE)
//! [![Rust](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/workflows/RustAction/badge.svg)](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/)
//! [![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fbestia-dev%2Fbestia_dev_new_rust_wasm_pwa&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=hits&amp;edge_flat=false)](https://hits.seeyoufarm.com)
//!
//! Hashtags: #rustlang #tutorial #pwa #wasm #webassembly  
//! My projects on Github are more like a tutorial than a finished product: [bestia-dev tutorials](https://github.com/bestia-dev/tutorials_rust_wasm).
//!
//! ## Try it
//!
//! &lt;https://bestia.dev/bestia_dev_new_rust_wasm_pwa/&gt;  
//! ![screenshot](https://github.com/bestia-dev/bestia_dev_new_rust_wasm_pwa/raw/main/images/screen_1.jpg)
//!
//! ## Motivation
//!
//! I think PWA (Progressive Web Applications) are the future for many types of applications. In combination with Rust and Wasm it is a really great development platform that works almost everywhere.
//! But it is tricky to put all the scaffolding in place and start a new project.
//! So I created a simple application to create this initial scaffolding. It is like `cargo new`, but for Rust_Wasm_PWA.  
//! To allow input of parameters in a GUI I didn&#39;t create a CLI, but a PWA.  
//! Practice what you preach !
//!
//! ## Youtube video
//!
//! I created a video on youtube to demonstrate how to use it.
//! TODO: image and link to youtube
//!
//! ## Development of the utility
//!
//! I use `cargo-auto` to automate development tasks: `cargo install cargo-auto`.  
//! Then inside the Rust project folder `cargo auto` for the instructions.
//! PWA files MUST be served by a web server. We will use the most simple development web server: `cargo install basic-http-server`.  
//! Open a new terminal window in VSCode and go to the web server folder and run the server:  
//! `cd ~/rustprojects/bestia_dev_new_rust_wasm_pwa/web_server_folder; basic-http-server`  
//! Inside VSCode add the port 4000 for forwarding out of the docker container.
//! Open the browser in Win10 on:  
//! &lt;http://127.0.0.1:4000/bestia_dev_new_rust_wasm_pwa/&gt;  
//!
//! ## Video Subtitles
//!
//! Welcome to bestia.dev !
//! Learning Rust and Wasm programming and having fun.
//! I just love  programming !
//!
//! In my first video tutorial, we set up WSL 2 (Windows subsystem for Linux) with Debian 11 on Windows 10.
//! In the second video, we created a Docker container with a complete Rust development environment to use with VS Code.
//! In the third video, we created a simple CLI (command line interface) application to demonstrate how Rust development works in real life.
//!
//! Today we will go a step further to perfection.  
//! The Rust code can be compiled for almost every architecture and Operating system. And the CLI interface for text terminals is almost universal.  
//! What we really want is to have a Graphical user interface, but this is a problem Rust cannot help us.  
//! Every Operating system invented a totally incompatible library for the G.U.I. On purpose, so they can sell expensive things and have a monopoly.
//! There are a few universal G.U.I libraries that works on many OS, but probably not everywhere.
//! I think that the only true world standard for G.U.I is HTML5 with CSS3. That will probably work everywhere.
//! It is not a light solution, the HTML and CSS must be rendered by a browser. But if the whole web is created around it, that must mean it is quite good.
//!
//! The G.U.I must be manipulated programmatically and unfortunately for 25 years we were cursed to use only Javascript. That was not great at all.
//! Fortunately all browser manufacturers agreed and implemented WebAssembly or WASM. The best language to be compiled to WASM is Rust. Great for us Rustaceans!
//!
//! Traditional Web pages and Web Applications needed an internet connection to be online to work. For a simple utility application we would like to use it offline.
//! Enter PWA (Progressive Web Application). This is a small standard that enables offline use of Web Applications and it is implemented in all modern browsers. Hooray!
//!
//! This demonstrative project will be fairly simple, just to show the main scaffolding needed to make a PWA using WASM and Rust.
//!
//! The problem we are solving is simple: Text sort.  
//! I have a list of song titles and I want to sort them alphabetically.
//! There are many, many solutions all around: online, inside text editors, as bash command,... but I need a special sorting that is not English.
//! Everything then falls apart ! Most of the solutions are English only. Or it is very complicated to select the desired collation (alphabetical order).
//!
//! Let&#39;s get started!
//!
//! After reboot I need to initialize my Rust development environment with a short script.
//! Then I can open VSCode press F1 and connect to the Remote SSH Host.
//! There I will create the directory for the new project.
//! The name of the project will be &quot;Sort text international PWA in Rust WASM&quot;.
//!
//! ## cargo crev reviews and advisory
//!
//! We live in times of danger with [supply chain attacks](https://en.wikipedia.org/wiki/Supply_chain_attack).
//!
//! It is recommended to always use [cargo-crev](https://github.com/crev-dev/cargo-crev) to verify the trustworthiness of each of your dependencies.
//!
//! Please, spread this info.
//!
//! You can also read crev reviews quickly on the web:
//!
//! &lt;https://web.crev.dev/rust-reviews/crates/&gt;
//!
//! ## open-source and free as a beer
//!
//! My open-source projects are free as a beer (MIT license).
//!
//! I just love programming.
//!
//! But I need also to drink. If you find my projects and tutorials helpful,please buy me a beer donating on my [paypal](https://paypal.me/LucianoBestia).
//!
//! You know the price of a beer in your local bar ;-) So I can drink a free beer for your health :-)
//!
//! [Na zdravje!](https://translate.google.com/?hl=en&amp;sl=sl&amp;tl=en&amp;text=Na%20zdravje&amp;op=translate) [Alla salute!](https://dictionary.cambridge.org/dictionary/italian-english/alla-salute) [Prost!](https://dictionary.cambridge.org/dictionary/german-english/prost) [Nazdravlje!](https://matadornetwork.com/nights/how-to-say-cheers-in-50-languages/) 🍻
//!
// endregion: auto_md_to_doc_comments include README.md A //!

use wasm_bindgen::prelude::*;

mod dom_mod;
mod web_sys_mod;

#[wasm_bindgen(start)]
/// To start the Wasm application, wasm_bindgen runs this functions
pub fn wasm_bindgen_start() -&gt; Result&lt;(), JsValue&gt; {
    // Initialize debugging for when/if something goes wrong.
    console_error_panic_hook::set_once();
    // write the app version just for debug purposes
    web_sys_mod::debug_write(&amp;format!(
        &quot;{} v{}&quot;,
        env!(&quot;CARGO_PKG_NAME&quot;),
        env!(&quot;CARGO_PKG_VERSION&quot;)
    ));
    dom_mod::start_function();
    // return
    Ok(())
}

&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_src_dom_mod_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_src_dom_mod_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/src/dom_mod.rs&quot;</span>), <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r###&quot;
//! dom_mod.rs manipulates the html dom

use crate::web_sys_mod::*;

/// The app starts with this function
pub fn start_function() {
    // inject html into DOM
    inject_htm_into_dom();
    // prepare events that read local file, pass the function to execute
    add_listener_to_button(&quot;button_1&quot;, &amp;on_click_button_1);
}

/// inject html into dom
pub fn inject_htm_into_dom() {
    let html = format!(
        r##&quot;
        &lt;h2 id=&quot;hello_text&quot;&gt;Hello World !&lt;/h2&gt;
		
        &lt;div class=&quot;button-wrap&quot;&gt;
            &lt;label for=&quot;my_name&quot;&gt;Enter your name:&lt;/label&gt;  
            &lt;input style=&quot;width:40%;&quot; type=&quot;text&quot; id=&quot;my_name&quot; value=&quot;my_name&quot;/&gt;
        &lt;/div&gt;

        &lt;!--tricky div+label+css to change Input file appearance --&gt;
        &lt;div class=&quot;button-wrap&quot;&gt;
            &lt;input id=&quot;button_1&quot; type=&quot;button&quot; class=&quot;button&quot; value=&quot;Reload&quot;/&gt;
        &lt;/div&gt;
        &quot;##
    );

    set_inner_html(&quot;div_for_wasm_html_injecting&quot;, &amp;html);
}

/// the listener calls this function
fn on_click_button_1() {
    let my_name = get_input_element_value_string_by_id(&quot;my_name&quot;);
    let my_name = html_encode(&amp;my_name);
    set_inner_html(&quot;hello_text&quot;, &amp;format!(&quot;Hello {my_name} !&quot;));
}

&quot;###</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_src_web_sys_mod_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_src_web_sys_mod_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/src/web_sys_mod.rs&quot;</span>), <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r###&quot;
//! web_sys_mod.rs
//! helper functions for web_sys, window, dom, console, html elements,...
//! Trying to isolate/hide all javascript code and conversion in this module.

// region: use
use unwrap::unwrap;
use wasm_bindgen::prelude::*;
use wasm_bindgen::{JsCast, JsValue};
use web_sys::console;
// endregion: use

/// return the global window object
pub fn window() -&gt; web_sys::Window {
    unwrap!(web_sys::window())
}

/// get element by id
pub fn get_element_by_id(element_id: &amp;str) -&gt; web_sys::Element {
    let document = unwrap!(window().document());
    unwrap!(document.get_element_by_id(element_id))
}

/// debug write into session_storage
pub fn debug_write(text: &amp;str) {
    // writing to the console
    console::log_1(&amp;JsValue::from_str(text));
}

/// get html element by id
pub fn get_html_element_by_id(element_id: &amp;str) -&gt; web_sys::HtmlElement {
    let element = get_element_by_id(element_id);
    let html_element: web_sys::HtmlElement = unwrap!(element.dyn_into::&lt;web_sys::HtmlElement&gt;());
    //return
    html_element
}

/// HTML encode - naive
pub fn html_encode(input: &amp;str) -&gt; String {
    input
        .replace(&quot;&amp;&quot;, &quot;&amp;amp;&quot;)
        .replace(&quot;\&quot;&quot;, &quot;&amp;quot;&quot;)
        .replace(&quot;&#39;&quot;, &quot;&amp;apos;&quot;)
        .replace(&quot;&lt;&quot;, &quot;&amp;lt;&quot;)
        .replace(&quot;&gt;&quot;, &quot;&amp;gt;&quot;)
}

/// get input element value string by id
pub fn get_input_element_value_string_by_id(element_id: &amp;str) -&gt; String {
    let input_element = get_element_by_id(element_id);
    let input_html_element = unwrap!(input_element.dyn_into::&lt;web_sys::HtmlInputElement&gt;());
    input_html_element.value()
}

/// set inner html into dom
/// The inner_html must be correctly HTML encoded !
pub fn set_inner_html(element_id: &amp;str, inner_html: &amp;str) {
    let div_for_wasm_html_injecting = get_element_by_id(element_id);
    div_for_wasm_html_injecting.set_inner_html(inner_html);
}

/// add event listener for button
pub fn add_listener_to_button(element_id: &amp;str, fn_on_click_button: &amp;&#39;static (dyn Fn() + &#39;static)) {
    let handler_1 = Box::new(move || {
        fn_on_click_button();
    }) as Box&lt;dyn FnMut()&gt;;
    let closure = Closure::wrap(handler_1);

    let html_element = get_html_element_by_id(element_id);
    html_element.set_onclick(Some(closure.as_ref().unchecked_ref()));
    closure.forget();
}

&quot;###</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_gitignore_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_gitignore_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/.gitignore&quot;</span>), <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
/target
/pkg/

&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_license_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_author</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_license_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/LICENSE&quot;</span>), <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
MIT License

Copyright (c) 2022 {project_author}

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

&quot;##</span>
        .<span class="ident">replace</span>(<span class="string">&quot;{project_author}&quot;</span>, <span class="ident">project_author</span>)
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_cargo_toml_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">pwa_description</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_author</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_homepage</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_repository</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_cargo_toml_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/Cargo.toml&quot;</span>), <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
[package]
name = &quot;{rust_project_name}&quot;
version = &quot;2022.314.1836&quot;
authors = [&quot;{project_author}&quot;]
homepage = &quot;{project_homepage}&quot;
edition = &quot;2021&quot;
description = &quot;{pwa_description}&quot;
repository = &quot;{project_repository}&quot;
readme = &quot;README.md&quot;
license = &quot;MIT&quot;
keywords = [&quot;wasm&quot;]
categories = [&quot;tutorial&quot;]
publish = false

[lib]
# cdylib is for the wasm module library
crate-type = [&quot;cdylib&quot;]

[dependencies]
# the macro unwrap is great for WASM, because it shows the correct file and line number of the error
unwrap = &quot;1.2.1&quot;
wasm-bindgen = { version = &quot;0.2.69&quot;, features = [&quot;serde-serialize&quot;] }
console_error_panic_hook = &quot;0.1.6&quot;
js-sys = &quot;0.3.46&quot;

[dependencies.web-sys]
version = &quot;0.3.46&quot;
features = [
  &quot;AbortController&quot;,
  &quot;console&quot;,
  &quot;Document&quot;,
  &quot;Element&quot;,
  &quot;ErrorEvent&quot;,
  &quot;HtmlElement&quot;,
  &quot;HtmlInputElement&quot;,
  &quot;Window&quot;,
]

[dev-dependencies]
wasm-bindgen-test = &quot;0.3.19&quot;

[profile.release]
panic = &quot;abort&quot;

&quot;##</span>
        .<span class="ident">replace</span>(<span class="string">&quot;{pwa_description}&quot;</span>, <span class="ident">pwa_description</span>)
        .<span class="ident">replace</span>(<span class="string">&quot;{rust_project_name}&quot;</span>, <span class="ident">rust_project_name</span>)
        .<span class="ident">replace</span>(<span class="string">&quot;{project_author}&quot;</span>, <span class="ident">project_author</span>)
        .<span class="ident">replace</span>(<span class="string">&quot;{project_homepage}&quot;</span>, <span class="ident">project_homepage</span>)
        .<span class="ident">replace</span>(<span class="string">&quot;{project_repository}&quot;</span>, <span class="ident">project_repository</span>)
        .<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_readme_md_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_homepage</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_repository</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">project_author</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
    <span class="ident">pwa_description</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_readme_md_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/README.md&quot;</span>), <span class="ident">options</span>));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
[comment]: # (auto_md_to_doc_comments segment start A)

# {rust_project_name}

[comment]: # (auto_cargo_toml_to_md start)

**{pwa_description}**  
***version: 2021.204.1558  date: 2021-02-04 author: [{project_author}]({project_homepage}) repository: [GitHub]({project_repository})***  

[comment]: # (auto_cargo_toml_to_md end)

[comment]: # (auto_lines_of_code start)
[![Lines in Rust code](https://img.shields.io/badge/Lines_in_Rust-99-green.svg)]({project_repository})
[![Lines in Doc comments](https://img.shields.io/badge/Lines_in_Doc_comments-7-blue.svg)]({project_repository})
[![Lines in Comments](https://img.shields.io/badge/Lines_in_comments-18-purple.svg)]({project_repository})
[![Lines in examples](https://img.shields.io/badge/Lines_in_examples-0-yellow.svg)]({project_repository})
[![Lines in tests](https://img.shields.io/badge/Lines_in_tests-0-orange.svg)]({project_repository})

[comment]: # (auto_lines_of_code end)

[![License](https://img.shields.io/badge/license-MIT-blue.svg)]({project_repository}/blob/master/LICENSE)
[![Rust]({project_repository}/workflows/RustAction/badge.svg)]({project_repository}/)

Hashtags: #rustlang #tutorial #pwa #wasm #webassembly  

## Try it

&lt;{project_homepage}/{rust_project_name}/&gt;  

## Template

This is a template of a simple Rust Wasm PWA.  
It is created with this PWA utility:  
&lt;https://bestia.dev/bestia_dev_new_rust_wasm_pwa&gt;

## Development of the utility

Use `cargo-auto` to automate development tasks: `cargo install cargo-auto`.  
Then inside the Rust project folder run `cargo auto` for the instructions.
PWA files MUST be served by a web server. We will use the most simple development web server:  
`cargo install basic-http-server`.  
Open a new terminal window in VSCode and go to the web server folder and run the server:  
`cd ~/rustprojects/{rust_project_name}/web_server_folder; basic-http-server`  
Inside VSCode add the port 4000 for forwarding out of the docker container.
Open the browser in Win10 on:  
&lt;http://127.0.0.1:4000/{rust_project_name}/&gt;  

[comment]: # (auto_md_to_doc_comments segment end A)

&quot;##</span>
.<span class="ident">replace</span>(<span class="string">&quot;{rust_project_name}&quot;</span>, <span class="ident">rust_project_name</span>)
.<span class="ident">replace</span>(<span class="string">&quot;{project_homepage}&quot;</span>, <span class="ident">project_homepage</span>)
.<span class="ident">replace</span>(<span class="string">&quot;{project_repository}&quot;</span>, <span class="ident">project_repository</span>)
.<span class="ident">replace</span>(<span class="string">&quot;{project_author}&quot;</span>, <span class="ident">project_author</span>)
.<span class="ident">replace</span>(<span class="string">&quot;{pwa_description}&quot;</span>, <span class="ident">pwa_description</span>)
.<span class="ident">as_bytes</span>()
    ));
}

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add_vscode_settings_to_zip</span>(
    <span class="ident">zip</span>: <span class="kw-2">&amp;mut</span> <span class="ident">zip::ZipWriter</span><span class="op">&lt;</span><span class="ident">std::io::Cursor</span><span class="op">&lt;</span><span class="kw-2">&amp;mut</span> [<span class="ident">u8</span>]<span class="op">&gt;</span><span class="op">&gt;</span>,
    <span class="ident">now</span>: <span class="kw-2">&amp;</span><span class="ident">zip::DateTime</span>,
    <span class="ident">rust_project_name</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>,
) {
    <span class="ident">debug_write</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;add_vscode_settings_to_zip&quot;</span>));
    <span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">zip::write::FileOptions::default</span>()
        .<span class="ident">compression_method</span>(<span class="ident">zip::CompressionMethod::Stored</span>)
        .<span class="ident">last_modified_time</span>(<span class="kw-2">*</span><span class="ident">now</span>);
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">start_file</span>(
        <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{rust_project_name}/.vscode/settings.json&quot;</span>),
        <span class="ident">options</span>
    ));
    <span class="macro">unwrap!</span>(<span class="ident">zip</span>.<span class="ident">write</span>(
        <span class="string">r##&quot;
{
    &quot;cSpell.words&quot;: [
        &quot;apos&quot;,
        &quot;bestia&quot;,
        &quot;bindgen&quot;,
        &quot;cdylib&quot;,
        &quot;endregion&quot;,
        &quot;jetli&quot;,
        &quot;onclick&quot;,
        &quot;plantuml&quot;,
        &quot;rustprojects&quot;,
        &quot;serde&quot;
    ]
}
&quot;##</span>
        .<span class="ident">as_bytes</span>()
    ));
}
</code></pre></div>
</section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="bestia_dev_new_rust_wasm_pwa" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0 (fe5b13d68 2022-05-18)" ></div>
</body></html>